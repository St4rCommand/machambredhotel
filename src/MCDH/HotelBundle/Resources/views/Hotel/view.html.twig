{%  extends "MCDHHotelBundle::layout.html.twig" %}

{% block title %}
  {{ hotel.name }} - {{ parent() }}
{% endblock %}

{% block mcdh_hotel_body %}
	
	{% block mcdh_hotel_page_title %}
		{{ parent() }}
		
		{% if hotel.image.uploadDir is defined %}
			<img
				src="{{ asset(hotel.image.uploadDir ~ '/' ~ hotel.image.id ~ '.' ~ hotel.image.extension) }}"
				alt="{{ hotel.image.alt }}"
			/>
		{% endif %}
		{% if is_granted('ROLE_HOTELKEEPER') %}
	  		
	  		<a href="{{ path('mcdh_hotel_add_room', {'idHotel':hotel.id}) }}" class="button btn-success btn-sm active" role="button">Ajouter une chambre</a>
			
			<a href="{{ path('mcdh_hotel_edit', {'idHotel':hotel.id}) }}" class="button btn-warning btn-sm active" role="button">Editer</a>
			
			{% if is_granted('ROLE_ADMIN') %}
	  			<a href="{{ path('mcdh_hotel_delete', {'idHotel':hotel.id}) }}" class="button btn-danger btn-sm active" role="button">Supprimer</a>
	  		{% endif %}
	  	{% endif %}
	{% endblock %}

	{% block mcdh_hotel_content %}
		
		<div class="row">
			<p>{{ hotel.description }}</p>
		</div>  
		
		<ul class="row list-group">
			{% for room in rooms %}
		      <li class="row list-group-item">
		        
		        <div class="col-lg-9 col-sm-7">
		        	<a href="{{ path('mcdh_hotel_view_room', {'idRoom': room.id}) }}"> {{ room.name }}</a>
					{{ room.price|number_format(2, ',', ' ') }} €
		        </div>
		        
		        {% if is_granted('ROLE_CUSTOMER') %}
			    	<div class="col-lg-1 col-sm-2"><a href="{{ path('mcdh_hotel_add_booking', {'idRoom':room.id}) }}" class="button btn-success btn-sm active" role="button">Réserver</a></div>
	  			{% endif %}
		        
		        {% if is_granted('ROLE_HOTELKEEPER') %}
			       <div class="col-lg-1 col-sm-1"><a href="{{ path('mcdh_hotel_edit_room', {'idRoom': room.id}) }}" class="button btn-warning btn-sm active" role="button">Editer</a></div>
	  			{% endif %}
	  			
		        {% if is_granted('ROLE_ADMIN') %}
			        <div class="col-lg-1 col-sm-1"><a href="{{ path('mcdh_hotel_delete_room', {'idRoom': room.id}) }}" class="button btn-danger btn-sm active" role="button">Supprimer</a></div>
	  			{% endif %}
			    
		      </li>
		    {% else %}
		      <li>Pas (encore !) de chambres pour cet hôtel.</li>
		    {% endfor %}
		</ul>  
	
	{% endblock %}
  
{% endblock %}
